# Hippos 项目概览

## 项目信息

| 属性 | 值 |
|------|-----|
| **项目名称** | Hippos（亦称 Mantle/Atollo） |
| **版本** | v1.0.0 |
| **编制日期** | 2026-01-10 |
| **项目类型** | 高性能上下文管理服务 |

## 项目定位

Hippos 是一款为 AI Agent 设计的高性能上下文管理服务，核心使命是解决大语言模型在长对话场景中面临的上下文窗口限制问题。

### 核心价值主张

1. **无限会话感知**：全量存储机制确保每一轮对话的原始内容都被完整保留
2. **Token 成本优化**：渐进式披露策略，仅在需要时加载详细历史内容
3. **会话隔离安全**：严格的多租户架构确保数据完全独立

### 设计灵感

借鉴人类认知系统的记忆机制：
- 海马体 → 信息筛选和编码
- 大脑皮层 → 长期记忆存储
- 需要时 → 提取和整合

## 核心功能

| 功能 | 描述 |
|------|------|
| 会话管理 | 创建、销毁、查询会话 |
| 对话存储 | 存储对话轮次，保留原始内容 |
| 智能索引 | 自动生成摘要、主题标签、语义向量 |
| 渐进式披露 | 先感知（摘要）后挂载（完整内容） |
| 语义检索 | 基于向量相似度的模糊搜索 |
| 多租户隔离 | Namespace → Table → Field 三级隔离 |

## 技术架构

### 分层架构

```
┌─────────────────────────────────────────────────────┐
│ 接入层 (API Layer)                                   │
│   - MCP Server / REST API / gRPC Interface          │
├─────────────────────────────────────────────────────┤
│ 服务层 (Service Layer)                               │
│   - SessionManager / RetrievalSvc / IndexSvc        │
│   - DehydrationSvc / AuthSvc                        │
├─────────────────────────────────────────────────────┤
│ 索引层 (Index Layer)                                 │
│   - Vector Index (IVF-PQ) / Full-Text Index         │
├─────────────────────────────────────────────────────┤
│ 存储层 (Storage Layer)                               │
│   - SurrealDB (主数据) + LanceDB (向量索引)          │
└─────────────────────────────────────────────────────┘
```

### 技术栈

| 组件 | 选型 | 版本要求 |
|------|------|----------|
| 语言 | Rust | ≥ 1.75 |
| 主数据库 | SurrealDB | 1.x |
| 向量索引 | LanceDB | 最新稳定版 |
| Web 框架 | Axum | 0.7 |
| 协议 | MCP | 最新规范 |
| 嵌入模型 | all-MiniLM-L6-v2 | 384 维 |

## 性能目标

| 指标 | 目标值 |
|------|--------|
| P99 延迟 | < 10ms |
| 向量检索 QPS | ≥ 5,000 |
| 单节点活跃会话 | ≥ 10,000 |
| 向量索引总规模 | ≤ 100M |

## 项目结构

```
hippos/
├── src/                    # 源代码
│   ├── main.rs
│   ├── lib.rs
│   ├── config/            # 配置模块
│   ├── models/            # 数据模型
│   ├── storage/           # 存储层
│   ├── index/             # 索引层
│   ├── services/          # 服务层
│   ├── api/               # API 层
│   └── utils/             # 工具函数
├── docs/                  # 文档
├── tests/                 # 测试
├── Cargo.toml
└── config.yaml
```

## 快速开始

```bash
# 1. 克隆项目
git clone <repo_url>
cd hippos

# 2. 安装依赖
cargo build

# 3. 配置
cp config.example.yaml config.yaml
# 编辑 config.yaml

# 4. 运行
cargo run
```

## 相关文档

- [需求文档](./需求文档.md)
- [架构设计文档](./架构设计文档.md)
- [评审建议](./评审建议.md)
- [实施计划](./TODO.md)
- [项目状态](./PROJECT_STATUS.md)
